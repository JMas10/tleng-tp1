En el presente Trabajo Práctico nos propusimos experimentar con herramientas y técnicas frecuentemente utilizadas a nivel de red. En particular implementamos una herramienta cuya funcionalidad replica la de \texttt{traceroute}. A partir de la misma nos enfocamos en medir los \texttt{Round-Trip delay Time (RTT)} entre diversos hosts en búsqueda de obtener una mínima noción de la topología de la red global, en particular intentando detectar los enlaces entre diversos continentes.

Nuestra implementación de \texttt{traceroute} se baso en el intercambio de mensajes de tipo \texttt{echo request\\/reply} y \texttt{time exceeded} del protocolo \texttt{ICMP}\cite{rfc792}. Concretamente, utilizando la librería scapy, armamos varios paquetes de tipo \texttt{echo request}, variando el campo \texttt{Time To Live (TTL)} de los mismos entre 1 y un valor lo suficientemente grande tal que nos permita llegar a cualquier host, siendo 30 ese valor. Una vez enviados los paquetes, cuando recibimos respuesta, estas fueron de tipo \texttt{time exceeded} o \texttt{echo reply}.

El cálculo de la ruta entre dos hosts consistió en realizar varias iteraciones de nuestro \texttt{traceroute} a la dirección destino, y, con esa información, obtener la ruta habitual entre nuestro host fuente y destino. Por habitual nos referimos a aquella ruta tomada por los paquetes en la mayoría de los casos. Tuvimos que determinar una ruta habitual debido al hecho que los paquetes no siguieron siempre un mismo camino, lo cual, siguiendo la terminología propuesta por Jobst\cite{Jobst}, se puede deber a diversas anomalías (\textit{missing links}, \textit{false links}, \textit{loops and circle} y \textit{diamonds}).
Una de las principales razones por la cual surgen este tipo de anomalías es debido al balanceo de carga por paquete que realizan los routers.

Por otro lado, el cálculo del \texttt{RTT} entre los diversos hosts consistió en tomar el timestamp en el cual fue enviado el paquete y el timestamp de cuando se recibió la respuesta al mismo. Tomando como muestra aquellos tiempos correspondientes a la ruta habitual entre dos hosts, previo descarte de los outliers utilizando la metodología propuesta por Cimbala\cite{Cimbala}, definimos el \texttt{RTT} entre dos hosts como la media muestral. Nuevamente, en diversos casos, nos encontramos con una anomalía denominada \textit{false RTT}. La misma consiste en la aparición de valores de \texttt{RTT} que no son consistentes, por ejemplo valores menores para hosts que se encuentran a distancias mayores que otros mas cercanos. La aparición de esta anomalía se puede deber a dos razones, rutas de paquete asimétricos o enrutamiento MPLS. Cuando los respectivos caminos hacia y desde el destino son asimétricos, es decir, los paquetes se encaminan por senderos diferentes desde y hacia el objetivo, los tiempos de ida y vuelta pueden no reflejar el tiempo real que tarda un paquete para llegar al destino. MPLS es un caso similar al anterior y podría verse en que los tiempos de ida y vuelta casi equivalentes para varios saltos en el resultado de traceroute.

Por último es importante mencionar que no obtuvimos respuesta de todos los router, este fenómeno se debe a la anomalía \textit{missing hop}. Anomalía que puede ser producto de la existencia de un firewall en el router o una configuración del mismo para no generar respuesta a paquetes cuyo \texttt{TTL} es 0.
